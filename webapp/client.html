<!DOCTYPE html>
<html lang="en">

<!-- HEAD -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FLUKSO data visualization</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.0/socket.io.js"></script>
	
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<!-- BODY -->
<body>
	<div class="jumbotron jumbotron-fluid">
		<div class="container">
		  <h1 class="display-4">Flukso data visualization (version beta)</h1>
		  <h3>Voisin d'énergie</h3>
		  <p class="lead">by Alexandre Heneffe - ULB - IRIDIA.</p>
		</div>
	  </div>

	<div class="container-fluid">

		<!-- NAVBAR -->
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<!-- <a class="navbar-brand" href="#">Navbar w/ text</a> -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
			  <span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarText">
			  <ul class="navbar-nav mr-auto">
				<li class="nav-item active">
				  <a class="nav-link" href="#">Flukso <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
				  <a class="nav-link" href="#">Cabine basse tension</a>
				</li>
			  </ul>
			  <span class="navbar-text">
				<a class="nav-link" href="#">
					Profil <span id="profil_badge" class="badge badge-secondary">CDB</span> 
				</a> 
			  </span>
			</div>
		  </nav>

		<br>

		<div class="container-fluid">
			<div class="row">
			  <div class="col-8">
				<!-- Date selector -->
				<form onsubmit="processDateQuery();return false">
					<label for="day">Specific day : </label>
					<input type="date" id="day" value="2022-13-01" name="day">
					<input id="DaySubmit" type="submit" value="OK">
				</form>
				<br>
				<!-- <p id="date_msg"></p> -->
			  </div>

			  <div class="col-4">
				<!-- Time Unit selector -->
				<label for="day">Time unit : </label>
				<div class="btn-group btn-group-toggle" data-toggle="buttons">
					<label class="btn btn-secondary active">
						<input type="radio" name="time_unit_radio" value="second" autocomplete="off" onclick="changeTimeUnit()"> 
						Second
					</label>
					<label class="btn btn-secondary">
						<input type="radio" name="time_unit_radio" value="minute" autocomplete="off" onclick="changeTimeUnit()" checked> 
						Minute
					</label>
					<label class="btn btn-secondary">
						<input type="radio" name="time_unit_radio" value="hour" autocomplete="off" onclick="changeTimeUnit()"> 
						Hour
					</label>
					<label class="btn btn-secondary">
						<input type="radio" name="time_unit_radio" value="day" autocomplete="off" onclick="changeTimeUnit()"> 
						Day
					</label>
					<label class="btn btn-secondary">
						<input type="radio" name="time_unit_radio" value="month" autocomplete="off" onclick="changeTimeUnit()"> 
						Month
					</label>
					<label class="btn btn-secondary">
						<input type="radio" name="time_unit_radio" value="year" autocomplete="off" onclick="changeTimeUnit()"> 
						Year
					</label>
				</div>

			  </div>
			</div>
		  </div>


		<!-- Menu pour Flukso, groups, activity -->
		<ul class="nav nav-tabs" role="tablist">
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="#raw_data">Raw data</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="#power">Power</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="#groups">Groups of homes</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="#flukso_activity">Flukso Activity</a>
			</li>
		</ul>

		  <!-- Tab panes -->
		  <div class="tab-content">
			
			<!-- RAW DATA TAB -->
			<div id="raw_data" class="container-fluid tab-pane fade"><br>
				<h3>Raw flukso data <span id="date_badge", class="badge bg-info"></span></h3>
				

				<br><br><h6>Temporarily disabled.</h6>
				<!-- graphs -->
				<div class="row">
					<div class="col-sm-9">
						<div class="container-fluid">
							<!-- Raw flukso data -->
							<!-- list of items -->
							<ul class="list-group">
								<li class="list-group-item" id="raw_data_charts"></li>
							</ul>
						</div>
					</div>

					<div class="col-sm-3">
						<div class="container-fluid">
							<h3>Notations</h3>    
							   
						</div>
					</div>
				</div> 
			</div>

			<!-- POWER TAB -->
			<div id="power" class="container-fluid tab-pane fade"><br>
				<h3>Flukso Power <span id="date_badge", class="badge bg-info"></span></h3>
				
				<!-- graphs -->
				<!-- Flukso power : -->
				<div class="row">
					<div class="col-sm-9">
						<div class="container-fluid">
							<!-- list of items -->
							<ul class="list-group">
								<li class="list-group-item" id="power_data_charts"></li>
							</ul> 
						</div>
					</div>

					<div class="col-sm-3">
						<!-- => P_cons : P = Puissance, Consommation électrique : P_tot - P_prod
						=> P_tot : P_cons + P_prod 
							- P_tot Positif : Prélèvement 
							- P_tot Négatif : Injection  -->

						<div class="container-fluid">
							<div class="alert alert-secondary" role="alert">
								<h3>Notations</h3>    
								<p></p>
								<dl>
									<dt>P_cons : </dt>
									<div class="alert alert-danger" role="alert">
										<dd>Puissance consommée</dd>
										<dl> 
											P_cons = P_tot - P_prod
										</dl>
									</div>

									<dt>P_prod : </dt>
									<div class="alert alert-primary" role="alert">
										<dd>=> Puissance produite (Panneaux photovoltaïques)</dd>
									</div>

									<dt>P_tot : </dt>
									<div class="alert alert-dark" role="alert">
										<dd>Puissance totale</dd>
										<dl>
											P_tot = P_cons + P_prod
											<div class="alert alert-warning" role="alert">
												<dd>- P_tot > 0 (Positif) : Prélèvement</dd>
											</div>
											<div class="alert alert-success" role="alert">
												<dd>- P_tot < 0 (Négatif) : Injection</dd>
											</div>
										</dl>
									</div>
								</dl>  
							</div>   
						</div>
					</div>
				</div> 
			</div>

			<!-- GROUPS TAB -->
			<div id="groups" class="container-fluid tab-pane fade"><br>
			  <h3>Groups of homes <span id="date_badge", class="badge bg-info"></span></h3>
				
			  <br><br><h6>Temporarily disabled.</h6>
				<!-- graphs -->
				<div class="row">
					<div class="col-sm-9">
						<div class="container-fluid">
							<!-- groups power data -->
							<!-- list of items -->
							<ul class="list-group">
								<li class="list-group-item" id="groups_data_charts"></li>
							</ul>
						</div>
					</div>

					<div class="col-sm-3">
						<!-- => P_cons : P = Puissance, Consommation électrique : P_tot - P_prod
						=> P_tot : P_cons + P_prod 
							- P_tot Positif : Prélèvement 
							- P_tot Négatif : Injection  -->

						<div class="container-fluid">
							<div class="alert alert-secondary" role="alert">
								<h3>Notations</h3>    
								<p></p>
								<dl>
									<dt>P_cons : </dt>
									<div class="alert alert-danger" role="alert">
										<dd>Puissance consommée</dd>
										<dl> 
											P_cons = P_tot - P_prod
										</dl>
									</div>

									<dt>P_prod : </dt>
									<div class="alert alert-primary" role="alert">
										<dd>=> Puissance produite (Panneaux photovoltaïques)</dd>
									</div>

									<dt>P_tot : </dt>
									<div class="alert alert-dark" role="alert">
										<dd>Puissance totale</dd>
										<dl>
											P_tot = P_cons + P_prod
											<div class="alert alert-warning" role="alert">
												<dd>- P_tot > 0 (Positif) : Prélèvement</dd>
											</div>
											<div class="alert alert-success" role="alert">
												<dd>- P_tot < 0 (Négatif) : Injection</dd>
											</div>
										</dl>
									</div>
								</dl>  

								<h3>Groups</h3>
									<dl id="groups_legend"> </dl>
							</div> 
						</div>
					</div>
				</div> 
			</div>

			<!-- ACTIVITY TAB -->
			<div id="flukso_activity" class="container tab-pane fade"><br>
			  <h3>Flukso activity</h3>

			 	<br><br><h6>Not available yet.</h6>
			</div>
		  </div>
		

	</div>

</body>

<!-- JAVASCRIPT -->
<script src="chart.utils.js"></script>
<!-- <script src="client.js"></script> -->
<script src="client.js"></script>

</html>
